'use strict';var map,markers=[];function googleMap(){var a=new google.maps.Map(document.getElementById('map'),{zoom:12}),b=document.getElementById('pac-input'),c=new google.maps.places.SearchBox(b);a.controls[google.maps.ControlPosition.TOP_LEFT].push(b),a.addListener('bounds_changed',function(){c.setBounds(a.getBounds())}),c.addListener('places_changed',function(){var b=c.getPlaces();if(0!=b.length){markers.forEach(function(a){a.setMap(null)});var d=new google.maps.LatLngBounds;b.forEach(function(a){if(!a.geometry)return void console.log('Returned place contains no geometry');({url:a.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)});a.geometry.viewport?d.union(a.geometry.viewport):d.extend(a.geometry.location)}),a.fitBounds(d)}});new google.maps.Marker({map:a});navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(b){var c=new google.maps.LatLng(b.coords.latitude,b.coords.longitude);a.setCenter(c);new google.maps.Marker({position:{lat:b.coords.latitude,lng:b.coords.longitude}})}),a.addListener('click',function(b){for(var c=new google.maps.Marker({position:{lat:b.latLng.lat(),lng:b.latLng.lng()},map:a}),d=0;d<markers.length;d++)markers[d].setMap(null);markers.push(c),document.querySelector('#geolocation-submit-custom-lat').value=b.latLng.lat(),document.querySelector('#geolocation-submit-custom-lng').value=b.latLng.lng()})}function successGeolocation(a){console.log(a),document.querySelector('#geolocation-result-ko').value=JSON.stringify(a.ko,null,2),document.querySelector('#geolocation-result-en').value=JSON.stringify(a.en,null,2),document.querySelector('#geolocation-list-ko').innerHTML=getResultList(a.ko.results,'geo','ko'),document.querySelector('#geolocation-list-en').innerHTML=getResultList(a.en.results,'geo','en'),document.querySelector('#creation').classList.remove('none')}function successNavigation(a){console.log(a),document.querySelector('#map-list').innerHTML=getResultList(a,'navi')}function successCreation(a){!0===a?alert('Place was created'):alert('Empty Value!')}function successDestruction(a){a?alert('Place was destroyed'):alert('Empty Value!'),httpRequest('GET','/api/request/map?info='+__URL__,null,successNavigation,null)}function getResultList(a,b,c){var d,e,f='';switch(b){case'geo':for(var g in a){var h=[];for(var i in a[g].address_components)a[g].address_components[i].types.includes('postal_code')||(a[g].address_components[i].types.includes('country')&&(d=a[g].address_components[i].long_name,e=a[g].address_components[i].short_name),h.push('"'+a[g].address_components[i].long_name+'"'));f+='<div class=\'row\' data-country=\''+d+'\' data-code=\''+e+'\'  data-array=\'['+h+']\' data-id=\''+a[g].place_id+'\' >'+a[g].formatted_address+'</div>'}break;case'navi':for(var j in a)f+='<div class=\'row\' data-code=\''+a[j].code+'\' data-num=\''+a[j].num+'\' >'+a[j].global+'<br/>'+a[j].native+'</div>';}return'ko'===c?f+='<div class=\'row custom-'+c+'\' data-country=\''+d+'\' data-code=\''+e+'\'  data-array=\'[]\' data-id=\'\' contenteditable=\'true\' placeholder=\'Custom Input .. ex) \uB300\uD55C\uBBFC\uAD6D/\uC11C\uC6B8\uD2B9\uBCC4\uC2DC/\uB3D9\uC791\uAD6C/\uD751\uC11D\uB3D9\'></div>':'en'===c?f+='<div class=\'row custom-'+c+'\' data-country=\''+d+'\' data-code=\''+e+'\'  data-array=\'[]\' data-id=\'\' contenteditable=\'true\' placeholder=\'Custom Input .. ex) Heukseok-dong/Dongjak-gu/Seoul/South Korea/\'></div>':void 0,f}function getRandom(a,b){var c=Math.random()*(b-a)+a;return c}function tabChange(a){document.querySelectorAll('.'+a.parentElement.className+' div').forEach(function(a){a.classList.remove('active'),document.querySelector('#'+a.className+'-area').classList.add('none')}),document.querySelector('#'+a.className+'-area').classList.remove('none'),a.classList.add('active')}document.querySelector('.admin').addEventListener('click',function(a){var b=a.target;switch(b.classList.item(0)){case'row':document.querySelectorAll('#'+b.parentElement.id+' .row.selected').forEach(function(a){a.classList.remove('selected')}),b.classList.toggle('selected'),b.classList.value.includes('custom');break;case'creation':tabChange(b);break;case'destruction':tabChange(b),httpRequest('GET','/api/request/map?info='+__URL__,null,successNavigation,null);}var c='',d=0,e=0;switch(b.id){case'geolocation-submit-custom':if(d=document.querySelector('#geolocation-submit-custom-lat').value,e=document.querySelector('#geolocation-submit-custom-lng').value,!d||!e)return!1;httpRequest('GET','/api/geocode?latlng='+d+','+e,null,successGeolocation,null);break;case'geolocation-submit-random':d=getRandom(-90,90),e=getRandom(-180,180),document.querySelector('#geolocation-submit-custom-lat').value=d,document.querySelector('#geolocation-submit-custom-lng').value=e,httpRequest('GET','/api/geocode?latlng='+d+','+e,null,successGeolocation,null);break;case'geolocation-submit':navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(a){var b=a.coords.latitude,c=a.coords.longitude;console.log(b),document.querySelector('#geolocation-submit-custom-lat').value=b,document.querySelector('#geolocation-submit-custom-lng').value=c,httpRequest('GET','/api/geocode?latlng='+b+','+c,null,successGeolocation,null)});break;case'navi-request-submit':httpRequest('GET','/api/request/map?info='+__URL__,null,successNavigation,null);break;case'creation':var f=[],g='',h=[],i=document.querySelector('#map-description').value,j=document.querySelector('#map-keyword').value;d=document.querySelector('#geolocation-submit-custom-lat').value,e=document.querySelector('#geolocation-submit-custom-lng').value,document.querySelectorAll('.row.selected').forEach(function(a){switch(h.push(a.dataset.country),g=a.dataset.code,a.classList.item(1)){case'custom-ko':f.push(a.innerHTML.split('/').reverse());break;case'custom-en':f.push(a.innerHTML.split('/'));break;default:f.push(JSON.parse(a.dataset.array));}}),c={country:h,code:g,address:f,description:i,keyword:j,latitude:d,longitude:e},console.log(c),httpRequest('POST','/api/map/creation',JSON.stringify(c),successCreation,null);break;case'destruction':var k='';document.querySelectorAll('.row.selected').forEach(function(a){g=a.dataset.code,k=a.dataset.num}),c={code:g,num:k},console.log(c),httpRequest('POST','/api/map/destruction',JSON.stringify(c),successDestruction,null);}}),!function(){document.querySelector('.creation').click()}();