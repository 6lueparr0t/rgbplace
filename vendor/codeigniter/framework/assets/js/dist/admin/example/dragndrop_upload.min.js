"use strict";function dragstart_change(){state.className="",state.classList.add("drop_wait"),event.preventDefault()}function dragover_change(){state.className="",state.classList.add("drop_hover"),event.preventDefault()}function dragleave_change(){state.className="",state.classList.add("drop_wait"),event.preventDefault()}function dragend_clear(){console.log("dragEnd");var e=event.dataTransfer;if(e.items)for(var t=0;t<e.items.length;t++)e.items.remove(t);else event.dataTransfer.clearData()}function drop_upload(){console.log("Drop");for(var e=new XMLHttpRequest,t=new FormData,o=event.dataTransfer,n=0;n<o.files.length;n++)t.append("userfile[]",o.files[n]);console.log(t),e.open("post","/admin/upload",!0),e.onload=function(){if(this.status>=200&&this.status<400){var t=JSON.parse(this.response);console.log(t),console.log(e.getAllResponseHeaders()),state.className="",state.classList.add("drop_it")}else console.log(this.status)},e.upload.onprogress=function(){console.log("event.lengthComputable:"+event.lengthComputable),console.log("event.loaded:"+event.loaded),console.log("event.total:"+event.total);var e=event.total,t=event.loaded,o=100*t/e;console.log(o)},e.onerror=function(){},e.send(t)}function input_upload(){console.log("change");var e=new XMLHttpRequest,t=new FormData(document.querySelector("#upload"));if(t.getAll("userfile[]").length<0)return!1;console.log(t),e.open("post","/admin/upload",!0),e.onload=function(){if(this.status>=200&&this.status<400){var t=JSON.parse(this.response);console.log(t),console.log(e.getAllResponseHeaders()),state.className="",state.classList.add("drop_it")}else console.log(this.status)},e.upload.onprogress=function(){console.log("event.lengthComputable:"+event.lengthComputable),console.log("event.loaded:"+event.loaded),console.log("event.total:"+event.total);var e=event.total,t=event.loaded,o=100*t/e;console.log(o)},e.onerror=function(){},e.send(t)}var state=document.querySelector("#drop_zone"),drop_zone=document.querySelector("#drop_zone"),input_zone=document.querySelector("#input_zone");drop_zone.addEventListener("dragstart",function(){dragstart_change()}),drop_zone.addEventListener("dragover",function(){dragover_change()}),drop_zone.addEventListener("dragleave",function(){dragleave_change()}),drop_zone.addEventListener("dragend",function(){dragend_clear()}),drop_zone.addEventListener("drop",function(){drop_upload()}),input_zone.addEventListener("change",function(){input_upload()});