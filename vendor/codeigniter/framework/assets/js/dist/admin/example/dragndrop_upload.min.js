"use strict";const state=document.querySelector("label[for='input_zone']");function dragstart_change(){state.className="",state.classList.add("drop_wait"),event.preventDefault()}function dragover_change(){state.className="",state.classList.add("drop_hover"),event.preventDefault()}function dragleave_change(){state.className="",state.classList.add("drop_wait"),event.preventDefault()}function dragend_clear(){console.log("dragEnd");var a=event.dataTransfer;if(a.items)for(var b=0;b<a.items.length;b++)a.items.remove(b);else event.dataTransfer.clearData()}function drop_upload(){console.log("Drop");let a=new XMLHttpRequest,b=new FormData,c=event.dataTransfer;for(let a=0;a<c.files.length;a++)b.append("userfile[]",c.files[a]);console.log(b),a.open("post","/admin/upload",!0),a.onload=function(){if(200<=this.status&&400>this.status){let b=JSON.parse(this.response);console.log(b),console.log(a.getAllResponseHeaders()),state.className="",state.classList.add("drop_it")}else console.log(this.status)},a.upload.onprogress=function(){console.log("event.lengthComputable:"+event.lengthComputable),console.log("event.loaded:"+event.loaded),console.log("event.total:"+event.total);var a=event.total,b=event.loaded;console.log(100*b/a)},a.onerror=function(){},a.send(b)}function input_upload(){console.log("change");let a=new XMLHttpRequest,b=new FormData(document.querySelector("#upload"));return!(0>b.getAll("userfile[]").length)&&void(console.log(b),a.open("post","/admin/upload",!0),a.onload=function(){if(200<=this.status&&400>this.status){let b=JSON.parse(this.response);console.log(b),console.log(a.getAllResponseHeaders()),state.className="",state.classList.add("drop_it")}else console.log(this.status)},a.upload.onprogress=function(){console.log("event.lengthComputable:"+event.lengthComputable),console.log("event.loaded:"+event.loaded),console.log("event.total:"+event.total);var a=event.total,b=event.loaded;console.log(100*b/a)},a.onerror=function(){},a.send(b))}let drop_zone=document.querySelector("#upload"),input_zone=document.querySelector("#input_zone");drop_zone.addEventListener("dragstart",function(){dragstart_change()}),drop_zone.addEventListener("dragover",function(){dragover_change()}),drop_zone.addEventListener("dragleave",function(){dragleave_change()}),drop_zone.addEventListener("dragend",function(){dragend_clear()}),drop_zone.addEventListener("drop",function(){drop_upload()}),input_zone.addEventListener("change",function(){input_upload()});