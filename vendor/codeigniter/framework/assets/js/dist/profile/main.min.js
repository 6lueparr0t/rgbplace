"use strict";var params=new URLSearchParams(window.location.search),pswd=document.querySelector("#pswd"),conf=document.querySelector("#conf");function done(a){alert("\uC218\uC815\uB418\uC5C8\uC2B5\uB2C8\uB2E4.\nDone !"),location.reload()}function fail(a){console.log(a),alert("Fail")}function updateFail(a){console.log(a),Swal.fire({type:"error",title:"Update Fail",html:a.responseText})}function validateName(a){var b=!1,c=/^(?=[^\s\x22\x27])(?!.*[\s\x22\x27]).{2,20}$/;return b=c.test((a+"").toLowerCase()),b}function validateMail(a){var b=!1;if(400>a.length){var c=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;b=c.test((a+"").toLowerCase())}return b}function passwordCheck(){this.value==pswd.value?this.setCustomValidity(""):this.setCustomValidity("\uD328\uC2A4\uC6CC\uB4DC\uB97C \uD655\uC778\uD574\uC8FC\uC138\uC694.\nPlease Check your Password."),this.reportValidity()}function popup(a,b){Swal.fire({title:b,imageUrl:a,imageAlt:b,animation:!1})}var x;function sendCode(){var a=document.querySelector("#mail").value,b=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(!1===b.test((a+"").toLowerCase()))return Swal.fire({type:"error",title:"Check Your Mail..",text:"Please enter a valid Mail address"}),!0;x||httpRequest("POST","/sign/mailAuth",JSON.stringify({mail:a}),function(a){if(!0==a.send){Swal.fire({type:"success",title:"Send Successfully!",text:"Check Your MailBox and Input Auth Code in an hour."}),clearInterval(x),document.querySelector(".code").parentElement.className="tr";var b=new Date().getTime()+3600000+1e3;x=setInterval(function(){var a=Math.floor,c=new Date().getTime(),d=b-c,e=a(d%3660000/60000),f=a(d%60000/1e3);document.querySelector("#mail").disabled=!0,document.querySelector("#code").placeholder="Expiry Time - "+e.pad(2)+":"+f.pad(2),0>d&&(clearInterval(x),x=null,document.getElementsByName("code")[0].placeholder="Expiry Time - EXPIRED")},500)}else"over"==a.send?Swal.fire({type:"info",title:"Mail exceeded sending limit",text:"Please contact us. (admin@rgbplace.com)"}):"already"==a.send&&Swal.fire({type:"info",title:"Send Failed",text:"Your Mail Already used."})},null)}window.onpopstate=function(a){return a.state?tabChange(a.state.tab):history.go(-1)};function tabChange(a){params.delete("page"),document.querySelectorAll(".tab div").forEach(function(a){a.classList.remove("active"),document.querySelector("#"+a.className+"-area").classList.add("none")}),document.querySelector("."+a).classList.add("active"),document.querySelector("#"+a+"-area").classList.remove("none")}document.querySelector("#profile").addEventListener("click",function(a){var b=a.target,c="",d="",e=0,f="",g=[];if("tab"==b.parentElement.className){var h={info:__URL__,tab:b.classList.item(0)},i={no:params.get("no")?"&no="+params.get("no"):"",page:params.get("page")?"&page="+params.get("page"):""};switch(h.tab){case"info":history.pushState({tab:h.tab},"","?tab="+h.tab+i.no),tabChange(h.tab);break;case"upload":case"post":case"reply":case"message":case"report":history.pushState({tab:h.tab},"","?tab="+h.tab+i.no+i.page),tabChange(h.tab),httpRequest("get","/api/request/profile?info="+h.info+"&tab="+h.tab+i.no+i.page,null,function(a){var b=document.querySelector("#"+h.tab+"-list"),c=document.querySelector("#"+h.tab+"-page");b.innerHTML=a.list?a.list:"",c.innerHTML=a.page?a.page:""},fail);}return}if("profile-pagination"===b.parentElement.className){var j=b.getAttribute("data-tab"),k=b.getAttribute("data-page"),l=b.getAttribute("data-no")?b.getAttribute("data-no"):"";return history.pushState({tab:j},"","?tab="+j+"&page="+k+"&no="+l),void httpRequest("get","/api/request/profile?info="+__URL__+("&tab="+j+"&page="+k+"&no="+l),null,function(a){var b=document.querySelector("#"+j+"-list"),c=document.querySelector("#"+j+"-page");b.innerHTML=a.list,c.innerHTML=a.page},fail)}if("copy"==b.classList.item(0)){var m=b.firstElementChild;m.style.display="block",m.select(),document.execCommand("Copy");var n=b.querySelector(".tooltip");return n.style.animation="fadeInOut 2s ease-out 1",n.style.WebkitAnimation="fadeInOut 2s ease-out 1",setTimeout(function(){this.style.animation="",this.style.WebkitAnimation=""}.bind(n),2e3),void(m.style.display="none")}if("delete-message"==b.classList.item(0))return g.push({info:__URL__,tab:"message",idx:b.getAttribute("data-idx")}),void httpRequest("delete","/api/request/profile",JSON.stringify(g),function(){document.querySelector(".message").click()},fail);switch(b.id){case"save":if(validateName(document.querySelector("#name").value.trim()))c=document.querySelector("#name").value.trim();else{alert("\uB2C9\uB124\uC784\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.(\uACF5\uBC31, \uB530\uC634\uD45C['\"] X)\ncheck your name style(space, quotation mark['\"] X)");break}if(null!=document.querySelector("#mail"))if(validateMail(document.querySelector("#mail").value))d=document.querySelector("#mail").value,e=document.querySelector("#code").value;else{alert("check your mail pattern");break}if(pswd&&conf&&(pswd.value||conf.value))if(pswd.value!=conf.value){conf.reportValidity();break}else{if(0<pswd.value.length&&10>pswd.value.length||0<conf.value.length&&10>conf.value.length){pswd.setCustomValidity("\uD328\uC2A4\uC6CC\uB4DC\uB294 \uCD5C\uB300 10\uC790 \uC774\uC0C1 \uB123\uC5B4\uC8FC\uC138\uC694. Password must be at least 10 characters."),pswd.reportValidity();break}f=pswd.value}g.push({info:__URL__,no:params.get("no")?params.get("no"):0,name:c,mail:d,code:e,pswd:f}),httpRequest("put","/api/request/profile/save",JSON.stringify(g),done,updateFail);break;case"cancel":back();break;case"delete":confirm("\uACC4\uC815\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C? \uACC4\uC815 \uC0AD\uC81C \uC2DC, \uAC8C\uC2DC\uBB3C\uC740 \uB0A8\uC544\uC788\uC744 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \n Delete Your Account? your post & reply will be remain")&&(g.push({info:__URL__,tab:params.get("tab")?params.get("tab"):0,no:params.get("no")?params.get("no"):0}),httpRequest("delete","/api/request/profile",JSON.stringify(g),function(){alert("Bye Bye Badman !"),back()},fail));break;case"check":sendCode();}}),conf&&conf.addEventListener("input",passwordCheck),!function(){var a=params.get("tab")?params.get("tab"):"info";document.querySelector("."+a).click()}();