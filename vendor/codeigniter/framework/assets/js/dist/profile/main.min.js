"use strict";var pswd=document.querySelector("#pswd"),conf=document.querySelector("#conf"),params=new URLSearchParams(window.location.search);function done(a){alert("save done"),location.reload()}function fail(){alert("fail")}function validateName(a){var b=!1,c=/^(?=[^\s\x22\x27])(?!.*[\s\x22\x27]).{2,20}$/;return b=c.test((a+"").toLowerCase()),b}function validateEmail(a){var b=!1;if(400>a.length){var c=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;b=c.test((a+"").toLowerCase())}return b}function passwordCheck(){this.value==pswd.value?this.setCustomValidity(""):this.setCustomValidity("\uD328\uC2A4\uC6CC\uB4DC\uB97C \uD655\uC778\uD574\uC8FC\uC138\uC694.\nPlease Check your Password."),this.reportValidity()}window.onpopstate=function(a){return a.state?tabChange(a.state.tab):history.go(-1)};function tabChange(a){params.delete("page"),document.querySelectorAll(".tab div").forEach(function(a){a.classList.remove("active"),document.querySelector("#"+a.className+"-area").classList.add("none")}),document.querySelector("."+a).classList.add("active"),document.querySelector("#"+a+"-area").classList.remove("none")}document.querySelector("body").addEventListener("click",function(a){var b=a.target,c="",d="",e="";if("tab"==b.parentElement.className){var f={info:__URL__,field:b.classList.item(0)},g={page:params.get("page")?"&page="+params.get("page"):""};switch(f.field){case"info":history.pushState({tab:f.field},"","?tab="+f.field),tabChange(f.field);break;case"upload":case"post":case"reply":case"vote":case"report":history.pushState({tab:f.field},"","?tab="+f.field+g.page),tabChange(f.field),httpRequest("get","/api/request/profile?info="+f.info+"&field="+f.field+g.page,null,function(a){var b=document.querySelector("#"+f.field+"-list"),c=document.querySelector("#"+f.field+"-page");b.innerHTML=a.list,c.innerHTML=a.page},fail);}}switch(b.id){case"save":var h=[];if(validateName(document.querySelector("#name").value))c=document.querySelector("#name").value;else{alert("check your name style");break}if(null!=document.querySelector("#email"))if(validateEmail(document.querySelector("#email").value))d=document.querySelector("#email").value;else{alert("check your email pattern");break}if(pswd.value||conf.value)if(pswd.value!=conf.value){conf.reportValidity();break}else{if(0<pswd.value.length&&10>pswd.value.length||0<conf.value.length&&10>conf.value.length){pswd.setCustomValidity("\uD328\uC2A4\uC6CC\uB4DC\uB294 \uCD5C\uB300 10\uC790 \uC774\uC0C1 \uB123\uC5B4\uC8FC\uC138\uC694. Password must be at least 10 characters."),pswd.reportValidity();break}e=pswd.value}h.push({info:__URL__,name:c,email:d,pswd:e}),httpRequest("put","/api/request/profile/save",JSON.stringify(h),done,fail);break;case"cancel":back();}}),conf&&conf.addEventListener("input",passwordCheck),!function(){var a=params.get("tab")?params.get("tab"):"info";document.querySelector("."+a).click()}();