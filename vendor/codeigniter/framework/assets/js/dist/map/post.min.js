"use strict";var replyBox=document.querySelectorAll(".reply-button:not(.no):not(.yes)"),replyBoxNo=document.querySelectorAll(".reply-button.no"),replyBoxYes=document.querySelectorAll(".reply-button.yes");!function(){httpRequest("GET","/api/request/reply?info="+__URL__,null,refresh.bind(this),fail.bind(this))}();function replyTemplate(a,b,c,d){var e=document.createElement("li");return e.className="reply-container",e.innerHTML="<div class='reply-addon block' id='reply-"+b+"' name='reply-"+b+"'><input type='hidden' class='reply-idx' value='"+a+"'/><input type='hidden' class='reply-no' value='"+b+"'/><input type='hidden' class='reply-mode' value='"+c+"'/><div class='reply-box' id='reply-box-"+b+"' placeholder='Leave a Message .. &#xf303;' contenteditable='true'>"+d+"</div><div class='reply-button-group'><div class='reply-button send to'>Reply on Message <span style='font-weight:900;transform: translate(.4rem,.1rem);'>&#xf11c;</span></div><div class='reply-button yes to'>Confirm</div><div class='reply-button no to'>Not Yet ..</div><div class='reply-button cancel'>Cancel</div></div>",+"</div>",e}function getReplyPaging(a){httpRequest("GET","/api/request/reply?info="+__URL__+"&page="+a,null,refresh.bind(this),fail.bind(this))}function replyBoxToggle(a){a?(this.style.display="none",this.nextSibling.style.display="initial",this.nextSibling.nextSibling.style.display="initial"):(this.style.display="none",this.previousSibling.style.display="none",this.previousSibling.previousSibling.style.display="initial")}document.querySelector("body").addEventListener("click",function(a){var b=a.target;if("BODY"===b.tagName)return!1;if("I"===b.tagName&&(b=b.parentElement),0===b.parentElement.className.search("reply-pagination")){var c=b.getAttribute("data");getReplyPaging(c)}var d,e,f,g="",h="POST",i=[];switch(b.className){case"reply enable":case"reply enable show":case"reply-modify enable":case"reply-modify enable show":d=b.parentElement.parentElement.parentElement.parentElement,e=d.querySelector("ul .no").getAttribute("idx"),f=d.querySelector("ul .no").innerHTML,b.classList.contains("reply-modify")&&(g=d.querySelector("ul .content .text").innerHTML,d.querySelector("ul").classList.toggle("hide"),h="UPDATE"),b.classList.toggle("show"),0===d.lastChild.className.search("reply-container")?(d.removeChild(d.lastChild),"UPDATE"==h&&d.appendChild(replyTemplate(e,f,h,g))):d.appendChild(replyTemplate(e,f,h,g));break;case"reply-delete enable":d=b.parentElement.parentElement.parentElement.parentElement,f=d.querySelector("ul .no").innerHTML,h="DELETE",i.push({info:__URL__,no:f}),httpRequest(h,"/api/request/reply",JSON.stringify(i),success.bind(this),fail.bind(this));break;case"reply-button cancel":var j=b.parentElement.parentElement.parentElement.parentElement;j.querySelector(".reply.enable").classList.remove("show"),j.querySelector("ul").classList.remove("hide"),j.removeChild(j.lastChild);break;case"reply-button send to":case"reply-button send":replyBoxToggle.call(b,!0);break;case"reply-button yes to":case"reply-button yes":d=b.parentElement.parentElement,e=d.querySelector(".reply-idx").value,f=d.querySelector(".reply-no").value,h=d.querySelector(".reply-mode").value,g=d.querySelector(".reply-box").innerHTML,this.page=document.querySelector(".reply-pagination .active").getAttribute("data"),i.push({info:__URL__,idx:parseInt(this.page*__REPLY_LIST_ROWS_LIMIT__)+parseInt(e),no:f,message:g}),httpRequest(h,"/api/request/reply",JSON.stringify(i),success.bind(this),fail.bind(this));break;case"reply-button no to":case"reply-button no":replyBoxToggle.call(b,!1);break;case"delete enable":i.push({info:__URL__,no:f}),httpRequest("delete","/api/request/post",JSON.stringify(i),successDelete.bind(this),fail.bind(this));}});function success(){getReplyPaging(this.page)}function successDelete(){alert("Post Remove successfully"),redirect("list")}function refresh(a){a&&(document.querySelector(".reply-root").innerHTML=a)}function fail(a){var b=document.querySelector("#login");b.setCustomValidity(a.responseText),b.reportValidity()}