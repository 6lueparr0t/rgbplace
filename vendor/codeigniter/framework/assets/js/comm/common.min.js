"use strict";var onUnload=function(){event.returnValue=1};window.addEventListener("dragover",function(){event.preventDefault()}),window.addEventListener("drop",function(){event.preventDefault()});
var searchResult=document.querySelector("#map-result");function mapSearch(a){let b=new XMLHttpRequest,c="",d="",e=0;b.open("get","/map/search?keyword="+a.value,!0),b.onload=function(){if(200<=this.status&&400>this.status){if(d=JSON.parse(this.response),void 0!=d.code&&(e=d.code.length),0!=e){let a=[];for(let b,f=0;f<e;f++){b=d.place[f].split("&"),a.country=d.country[f];for(let c=0;c<b.length;c++)a[b[c].split(":")[0]]=b[c].split(":")[1];let e=a.country.split("|")[0]+" "+a.locality.split("|")[0]+" "+a.political1.split("|")[0]+" "+a.political2.split("|")[0]+(a.political3?" "+a.political3.split("|")[0]:""),g=(a.political3?" "+a.political3.split("|")[0]:"")+", "+a.political2.split("|")[1]+", "+a.political1.split("|")[1]+", "+a.locality.split("|")[1]+", "+a.country;c+="<a href='/"+d.code[f]+"'><li class='org'>"+e+"</li><li class='rev'>"+g+"</li></a>"}}else c="<a href='#'><li>No Results</li></a>";searchResult.innerHTML=c}else searchResult.innerHTML="No Results"},b.onprogress=function(){},b.onerror=function(){},b.send()}let searchBtn=document.querySelector("#map-search-button"),searchBox=document.querySelector("#map-search-box"),searchToggle=document.querySelector("#map-search");searchBtn&&searchBtn.addEventListener("click",function(){searchToggle.checked=!1,mapSearch(searchBox)}),searchBox&&searchBox.addEventListener("keyup",function(a){""==searchBox.value&&(searchToggle.checked=!1,searchResult.innerHTML="<a href='#'><li>No Results</li></a>"),"13"==a.keyCode&&(searchToggle.checked=!0,mapSearch(this))});
function signInCheck(a){let b=new FormData(a),c=new XMLHttpRequest,d='';c.open('post','/sign/in/check',!0),c.onload=function(){200<=this.status&&400>this.status&&(d=JSON.parse(this.response),d.valid?a.submit():alert(d.msg))},c.onprogress=function(){},c.onerror=function(){},c.send(b)}let signin=document.querySelector('#sign-in');signin&&signin.addEventListener('submit',function(){event.preventDefault(),signInCheck(signin)});